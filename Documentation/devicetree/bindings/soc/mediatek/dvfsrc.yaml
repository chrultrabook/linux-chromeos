# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: "http://devicetree.org/schemas/soc/mediatek/dvfsrc.yaml#"
$schema: "http://devicetree.org/meta-schemas/core.yaml#"

title: MediaTek dynamic voltage and frequency scaling resource collector (DVFSRC)

description: |
  The Dynamic Voltage and Frequency Scaling Resource Collector (DVFSRC) is a
  HW module which is used to collect all the requests from both software and
  hardware and turn into the decision of minimum operating voltage and minimum
  DRAM frequency to fulfill those requests.

maintainers:
  - henryc.chen <henryc.chen@mediatek.com>

properties:
  reg:
    maxItems: 1
    description: DVFSRC common register address and length.

  compatible:
    enum:
      - mediatek,mt6873-dvfsrc
      - mediatek,mt8183-dvfsrc
      - mediatek,mt8192-dvfsrc

  '#interconnect-cells':
    const: 1

  dvfsrc-vcore:
    type: object
    description:
      The DVFSRC regulator is modelled as a subdevice of the DVFSRC.
      Because DVFSRC can request power directly via register read/write, likes
      vcore which is a core power of mt8183. As such, the DVFSRC regulator
      requires that DVFSRC nodes be present.
    $ref: /schemas/regulator/regulator.yaml#

required:
  - compatible
  - reg
  - "#interconnect-cells"

additionalProperties: false

examples:
  - |
    #include <dt-bindings/interconnect/mtk,mt8183-emi.h>

    soc {
        #address-cells = <2>;
        #size-cells = <2>;

        dvfsrc@10012000 {
            compatible = "mediatek,mt8183-dvfsrc";
            reg = <0 0x10012000 0 0x1000>;
            #interconnect-cells = <1>;
            dvfsrc_vcore: dvfsrc-vcore {
                    regulator-name = "dvfsrc-vcore";
                    regulator-min-microvolt = <725000>;
                    regulator-max-microvolt = <800000>;
                    regulator-always-on;
            };
        };
    };
